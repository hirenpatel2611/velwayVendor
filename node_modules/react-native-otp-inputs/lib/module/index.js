import _classCallCheck from"@babel/runtime/helpers/classCallCheck";import _createClass from"@babel/runtime/helpers/createClass";import _possibleConstructorReturn from"@babel/runtime/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime/helpers/getPrototypeOf";import _inherits from"@babel/runtime/helpers/inherits";var _jsxFileName="/Users/damiansznajder/Projects/private/otp-inputs/lib/index.tsx";import React,{Component}from'react';import{Keyboard,Text,View}from'react-native';import flatten from'lodash.flatten';import OtpInput from'./OtpInput';import defaultStyles from'./defaultStyles';var MINIMAL_INDEX=0;var OtpInputs=function(_Component){_inherits(OtpInputs,_Component);function OtpInputs(props){var _this;_classCallCheck(this,OtpInputs);_this=_possibleConstructorReturn(this,_getPrototypeOf(OtpInputs).call(this,props));_this._handleAfterOtpAction=function(otpCode,indexToFocus){var _this$props=_this.props,handleChange=_this$props.handleChange,numberOfInputs=_this$props.numberOfInputs;handleChange(otpCode.join(''));_this.setState({otpCode:otpCode});if(indexToFocus===numberOfInputs){return Keyboard.dismiss();}if(indexToFocus>=MINIMAL_INDEX&&indexToFocus<numberOfInputs){_this._focusInput(indexToFocus);}};_this._updateText=function(event,index){var text=event.nativeEvent.text;var textLength=text.length;if(text){var otpArray=_this.state.otpCode;if(textLength>2){var numberOfInputs=_this.props.numberOfInputs;otpArray[index]=(textLength>numberOfInputs-index?[text.slice(1)]:[text]).join('');_this._handleAfterOtpAction(flatten(otpArray).slice(0,numberOfInputs),textLength);}else{otpArray[index]=text[text.length-1];_this._handleAfterOtpAction(otpArray,index+1);}}};_this._handleBackspace=function(event,index){if(event.nativeEvent.key==='Backspace'){var _this$props2=_this.props,handleChange=_this$props2.handleChange,numberOfInputs=_this$props2.numberOfInputs;var _otpCode=_this.state.otpCode;_otpCode[index]='';handleChange(_otpCode.join(''));_this.setState({otpCode:_otpCode});if(index>MINIMAL_INDEX&&index<numberOfInputs){_this._focusInput(index-1);}}};_this._focusInput=function(index){_this.inputs[index].current.focus();};_this._renderInputs=function(){var _this$props3=_this.props,autoCapitalize=_this$props3.autoCapitalize,clearTextOnFocus=_this$props3.clearTextOnFocus,errorMessage=_this$props3.errorMessage,focusedBorderColor=_this$props3.focusedBorderColor,inputContainerStyles=_this$props3.inputContainerStyles,inputStyles=_this$props3.inputStyles,inputTextErrorColor=_this$props3.inputTextErrorColor,keyboardType=_this$props3.keyboardType,numberOfInputs=_this$props3.numberOfInputs,secureTextEntry=_this$props3.secureTextEntry,selectTextOnFocus=_this$props3.selectTextOnFocus,unfocusedBorderColor=_this$props3.unfocusedBorderColor;var otpCode=_this.state.otpCode;var inputArray=[];var _loop=function _loop(index){inputArray[index]=React.createElement(OtpInput,{autoCapitalize:autoCapitalize,clearTextOnFocus:clearTextOnFocus,containerStyles:inputContainerStyles,error:!!errorMessage,focusedBorderColor:focusedBorderColor,handleBackspace:function handleBackspace(event){return _this._handleBackspace(event,index);},inputStyles:inputStyles,key:index,secureTextEntry:secureTextEntry,keyboardType:keyboardType,ref:_this.inputs[index],selectTextOnFocus:selectTextOnFocus,textErrorColor:inputTextErrorColor,unfocusedBorderColor:unfocusedBorderColor,updateText:function updateText(event){return _this._updateText(event,index);},value:otpCode[index],__source:{fileName:_jsxFileName,lineNumber:157}});};for(var index=MINIMAL_INDEX;index<numberOfInputs;index++){_loop(index);}return inputArray.map(function(input){return input;});};var inputs=[];for(var index=0;index<_this.props.numberOfInputs;index++){inputs[index]=React.createRef();}_this.inputs=inputs;_this.state={loading:false,otpCode:[]};return _this;}_createClass(OtpInputs,[{key:"componentDidMount",value:function componentDidMount(){this._renderInputs();}},{key:"render",value:function render(){var _this$props4=this.props,containerStyles=_this$props4.containerStyles,errorMessage=_this$props4.errorMessage,errorMessageContainerStyles=_this$props4.errorMessageContainerStyles,errorMessageTextStyles=_this$props4.errorMessageTextStyles,inputsContainerStyles=_this$props4.inputsContainerStyles;return React.createElement(View,{style:[defaultStyles.container,containerStyles],__source:{fileName:_jsxFileName,lineNumber:193}},errorMessage&&React.createElement(View,{style:[defaultStyles.errorMessageContainer,errorMessageContainerStyles],__source:{fileName:_jsxFileName,lineNumber:195}},React.createElement(Text,{testID:"errorText",style:errorMessageTextStyles,__source:{fileName:_jsxFileName,lineNumber:196}},errorMessage)),React.createElement(View,{style:[defaultStyles.inputsContainer,inputsContainerStyles],__source:{fileName:_jsxFileName,lineNumber:201}},this._renderInputs()));}}]);return OtpInputs;}(Component);OtpInputs.defaultProps={autoCapitalize:'none',clearTextOnFocus:false,focusedBorderColor:'#0000ff',handleChange:console.log,inputTextErrorColor:'#ff0000',keyboardType:'phone-pad',numberOfInputs:4,secureTextEntry:false,selectTextOnFocus:true,unfocusedBorderColor:'transparent'};export{OtpInputs as default};
//# sourceMappingURL=index.js.map