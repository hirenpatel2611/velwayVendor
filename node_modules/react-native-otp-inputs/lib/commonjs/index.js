var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _lodash=_interopRequireDefault(require("lodash.flatten"));var _OtpInput=_interopRequireDefault(require("./OtpInput"));var _defaultStyles=_interopRequireDefault(require("./defaultStyles"));var _jsxFileName="/Users/damiansznajder/Projects/private/otp-inputs/lib/index.tsx";var MINIMAL_INDEX=0;var OtpInputs=function(_Component){(0,_inherits2.default)(OtpInputs,_Component);function OtpInputs(props){var _this;(0,_classCallCheck2.default)(this,OtpInputs);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(OtpInputs).call(this,props));_this._handleAfterOtpAction=function(otpCode,indexToFocus){var _this$props=_this.props,handleChange=_this$props.handleChange,numberOfInputs=_this$props.numberOfInputs;handleChange(otpCode.join(''));_this.setState({otpCode:otpCode});if(indexToFocus===numberOfInputs){return _reactNative.Keyboard.dismiss();}if(indexToFocus>=MINIMAL_INDEX&&indexToFocus<numberOfInputs){_this._focusInput(indexToFocus);}};_this._updateText=function(event,index){var text=event.nativeEvent.text;var textLength=text.length;if(text){var otpArray=_this.state.otpCode;if(textLength>2){var numberOfInputs=_this.props.numberOfInputs;otpArray[index]=(textLength>numberOfInputs-index?[text.slice(1)]:[text]).join('');_this._handleAfterOtpAction((0,_lodash.default)(otpArray).slice(0,numberOfInputs),textLength);}else{otpArray[index]=text[text.length-1];_this._handleAfterOtpAction(otpArray,index+1);}}};_this._handleBackspace=function(event,index){if(event.nativeEvent.key==='Backspace'){var _this$props2=_this.props,handleChange=_this$props2.handleChange,numberOfInputs=_this$props2.numberOfInputs;var _otpCode=_this.state.otpCode;_otpCode[index]='';handleChange(_otpCode.join(''));_this.setState({otpCode:_otpCode});if(index>MINIMAL_INDEX&&index<numberOfInputs){_this._focusInput(index-1);}}};_this._focusInput=function(index){_this.inputs[index].current.focus();};_this._renderInputs=function(){var _this$props3=_this.props,autoCapitalize=_this$props3.autoCapitalize,clearTextOnFocus=_this$props3.clearTextOnFocus,errorMessage=_this$props3.errorMessage,focusedBorderColor=_this$props3.focusedBorderColor,inputContainerStyles=_this$props3.inputContainerStyles,inputStyles=_this$props3.inputStyles,inputTextErrorColor=_this$props3.inputTextErrorColor,keyboardType=_this$props3.keyboardType,numberOfInputs=_this$props3.numberOfInputs,secureTextEntry=_this$props3.secureTextEntry,selectTextOnFocus=_this$props3.selectTextOnFocus,unfocusedBorderColor=_this$props3.unfocusedBorderColor;var otpCode=_this.state.otpCode;var inputArray=[];var _loop=function _loop(index){inputArray[index]=_react.default.createElement(_OtpInput.default,{autoCapitalize:autoCapitalize,clearTextOnFocus:clearTextOnFocus,containerStyles:inputContainerStyles,error:!!errorMessage,focusedBorderColor:focusedBorderColor,handleBackspace:function handleBackspace(event){return _this._handleBackspace(event,index);},inputStyles:inputStyles,key:index,secureTextEntry:secureTextEntry,keyboardType:keyboardType,ref:_this.inputs[index],selectTextOnFocus:selectTextOnFocus,textErrorColor:inputTextErrorColor,unfocusedBorderColor:unfocusedBorderColor,updateText:function updateText(event){return _this._updateText(event,index);},value:otpCode[index],__source:{fileName:_jsxFileName,lineNumber:157}});};for(var index=MINIMAL_INDEX;index<numberOfInputs;index++){_loop(index);}return inputArray.map(function(input){return input;});};var inputs=[];for(var index=0;index<_this.props.numberOfInputs;index++){inputs[index]=_react.default.createRef();}_this.inputs=inputs;_this.state={loading:false,otpCode:[]};return _this;}(0,_createClass2.default)(OtpInputs,[{key:"componentDidMount",value:function componentDidMount(){this._renderInputs();}},{key:"render",value:function render(){var _this$props4=this.props,containerStyles=_this$props4.containerStyles,errorMessage=_this$props4.errorMessage,errorMessageContainerStyles=_this$props4.errorMessageContainerStyles,errorMessageTextStyles=_this$props4.errorMessageTextStyles,inputsContainerStyles=_this$props4.inputsContainerStyles;return _react.default.createElement(_reactNative.View,{style:[_defaultStyles.default.container,containerStyles],__source:{fileName:_jsxFileName,lineNumber:193}},errorMessage&&_react.default.createElement(_reactNative.View,{style:[_defaultStyles.default.errorMessageContainer,errorMessageContainerStyles],__source:{fileName:_jsxFileName,lineNumber:195}},_react.default.createElement(_reactNative.Text,{testID:"errorText",style:errorMessageTextStyles,__source:{fileName:_jsxFileName,lineNumber:196}},errorMessage)),_react.default.createElement(_reactNative.View,{style:[_defaultStyles.default.inputsContainer,inputsContainerStyles],__source:{fileName:_jsxFileName,lineNumber:201}},this._renderInputs()));}}]);return OtpInputs;}(_react.Component);exports.default=OtpInputs;OtpInputs.defaultProps={autoCapitalize:'none',clearTextOnFocus:false,focusedBorderColor:'#0000ff',handleChange:console.log,inputTextErrorColor:'#ff0000',keyboardType:'phone-pad',numberOfInputs:4,secureTextEntry:false,selectTextOnFocus:true,unfocusedBorderColor:'transparent'};
//# sourceMappingURL=index.js.map